## 简介

所有PRT技术共同的关键问题是light transport操作的表示，下面介绍了Spherical Gaussian（SG）基函数以及采用其进行PRT的方法。

## 1.Spherical Gaussian（SG）基函数

### 1.1主要特性

球面高斯具有以下三个主要特性：

- 支持任意频率；
- 仅使用少量系数便可做到精确近似；
- 在视觉上支持高质量的高斯插值。

### 1.2反射率方程的近似表示

直接光照的反射率方程很好表示：

![](http://latex.codecogs.com/svg.latex?T_{x,w_o}(w_i)=f_r(w_i, w_o)V_x(w_i)(n_xw_i))

<math>T_{\pmb{x},w_o}(w_i)=f_r(w_i, w_o)V_x(w_i)(\pmb{n_x}·w_i) \tag{1}</math>

下面将![](http://latex.codecogs.com/svg.latex? T_{x,w_o})  <math>T_{\pmb{x},w_o}</math>近似为N个加权各向同性高斯函数的总和：

<math>\widetilde{T}_{\pmb{x},w_o}(w_i)=\sum_{k}^nw_kG(w_i; μ_k, σ_k) \tag{2}</math>

其中G是以μ_k <math>μ_k</math>为中心的2D球形高斯函数，标准差为σk  <math>σ_k</math>，权重为wk  <math>w_k</math>。

标准差σk   <math>σ_k</math>的非线性效应支持对取值范围直接编码，从而提供任意大小的带宽；平均方向μ_k <math>μ_k</math>的非线性效应则允许SG进行更好的插值。当对多个高斯进行插值时，需要合适的对应关系以减少伪影（Paul，Jan，etc. 2006）。

## 2.应用SG基函数进行预计算的过程

在预处理步骤中模拟光传输过程，计算每个顶点和视线方向的transport function并进行高斯近似表示，存储每个顶点和视线方向的高斯参数。运行时的渲染非常简单。系数已经预存到了多层级的环境光贴图中，所以仅需要进行少量的纹理查询即可。

下图中展示了整个方法的具体流程：

<div align=center>![SG预计算及运行时渲染过程示意图](https://renderwiki.github.io/ImageResources/spherical gaussian basis function/SG预计算及运行时渲染过程示意图.png)</div>

<center>图2 SG预计算即运行时渲染过程示意图</center>



参考文献：

[1] Green P E . View-dependent precomputed light transport using non-linear Gaussian function approximations.  2007.



